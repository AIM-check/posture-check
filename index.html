<!DOCTYPE html>
<html>
<head>
  <title>Dual Camera Test</title>
  <style>
    video {
      width: 45%;
      margin: 10px;
      border: 2px solid #333;
    }
  </style>
</head>
<body>
  <h2>🎥 2カメラ同時表示テスト</h2>
  <div>
    <video id="video1" autoplay muted playsinline></video>
    <video id="video2" autoplay muted playsinline></video>
  </div>
  <script>
    async function getCameras() {
      const devices = await navigator.mediaDevices.enumerateDevices();
      return devices.filter(device => device.kind === 'videoinput');
    }

    async function startDualCamera() {
      const cameras = await getCameras();
      if (cameras.length < 2) {
        alert("⚠️ 2台のカメラが検出されませんでした。最低2台のWebカメラが必要です。");
        return;
      }

      const stream1 = await navigator.mediaDevices.getUserMedia({
        video: { deviceId: { exact: cameras[0].deviceId } }
      });
      document.getElementById("video1").srcObject = stream1;

      const stream2 = await navigator.mediaDevices.getUserMedia({
        video: { deviceId: { exact: cameras[1].deviceId } }
      });
      document.getElementById("video2").srcObject = stream2;
    }

    startDualCamera();
  </script>
</body>
</html>
