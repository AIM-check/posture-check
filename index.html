<!DOCTYPE html>
<html>
<head>
  <title>Dual Camera with MediaPipe</title>
  <style>
    video, canvas {
      width: 45%;
      margin: 10px;
      border: 2px solid #333;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5/pose.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
</head>
<body>
  <h2>🎥 2カメラ + MediaPipe Pose 姿勢検出</h2>
  <div>
    <video id="video1" autoplay muted playsinline></video>
    <canvas id="canvas1"></canvas>
    <video id="video2" autoplay muted playsinline></video>
    <canvas id="canvas2"></canvas>
  </div>
  <script>
    async function getCameras() {
      const devices = await navigator.mediaDevices.enumerateDevices();
      return devices.filter(device => device.kind === 'videoinput');
    }

    async function startDualCamera() {
      const cameras = await getCameras();
      if (cameras.length < 2) {
        alert("⚠️ 2台のカメラが検出されませんでした。");
        return;
      }

      const video1 = document.getElementById("video1");
      const video2 = document.getElementById("video2");
      const canvas1 = document.getElementById("canvas1");
      const canvas2 = document.getElementById("canvas2");
      const ctx1 = canvas1.getContext('2d');
      const ctx2 = canvas2.getContext('2d');

      const stream1 = await navigator.mediaDevices.getUserMedia({ video: { deviceId: { exact: cameras[0].deviceId } } });
      const stream2 = await navigator.mediaDevices.getUserMedia({ video: { deviceId: { exact: cameras[1].deviceId } } });
      video1.srcObject = stream1;
      video2.srcObject = stream2;

      video1.onloadedmetadata = () => {
        canvas1.width = video1.videoWidth;
        canvas1.height = video1.videoHeight;
      };
      video2.onloadedmetadata = () => {
        canvas2.width = video2.videoWidth;
        canvas2.height = video2.videoHeight;
      };

      const pose1 = new Pose.Pose({locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/pose
